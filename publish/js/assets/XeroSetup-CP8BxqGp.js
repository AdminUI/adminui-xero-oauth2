import{shallowRef as F,readonly as Oe,toValue as j,getCurrentScope as Re,onScopeDispose as Ie,watch as De,computed as le,getCurrentInstance as Xe,onMounted as Pe,unref as n,toRaw as Te,createElementBlock as T,openBlock as w,createStaticVNode as Me,useModel as $e,resolveComponent as l,createBlock as U,withCtx as t,createVNode as o,isRef as z,createElementVNode as p,createTextVNode as v,Fragment as B,renderList as re,toDisplayString as A,createCommentVNode as G,withModifiers as ie}from"https://cdn.jsdelivr.net/npm/vue@3/dist/vue.esm-browser.prod.min.js";function pe(i){return Re()?(Ie(i),!0):!1}const ae=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const je=Object.prototype.toString,Fe=i=>je.call(i)==="[object Object]";function We(i){let d;function r(){return d||(d=i()),d}return r.reset=async()=>{const g=d;d=void 0,g&&await g},r}function ee(i){return Array.isArray(i)?i:[i]}function Ee(i,d,r={}){const{immediate:g=!0,immediateCallback:x=!1}=r,y=F(!1);let u=null;function f(){u&&(clearTimeout(u),u=null)}function c(){y.value=!1,f()}function b(...m){x&&i(),f(),y.value=!0,u=setTimeout(()=>{y.value=!1,u=null,i(...m)},j(d))}return g&&(y.value=!0,ae&&b()),pe(c),{isPending:Oe(y),start:b,stop:c}}function Ne(i,d,r){return De(i,d,{...r,immediate:!0})}const Be=ae?window:void 0,me=ae?window.navigator:void 0;function ze(i){var d;const r=j(i);return(d=r==null?void 0:r.$el)!=null?d:r}function _e(...i){const d=[],r=()=>{d.forEach(f=>f()),d.length=0},g=(f,c,b,m)=>(f.addEventListener(c,b,m),()=>f.removeEventListener(c,b,m)),x=le(()=>{const f=ee(j(i[0])).filter(c=>c!=null);return f.every(c=>typeof c!="string")?f:void 0}),y=Ne(()=>{var f,c;return[(c=(f=x.value)==null?void 0:f.map(b=>ze(b)))!=null?c:[Be].filter(b=>b!=null),ee(j(x.value?i[1]:i[0])),ee(n(x.value?i[2]:i[1])),j(x.value?i[3]:i[2])]},([f,c,b,m])=>{if(r(),!(f!=null&&f.length)||!(c!=null&&c.length)||!(b!=null&&b.length))return;const e=Fe(m)?{...m}:m;d.push(...f.flatMap(C=>c.flatMap(V=>b.map(s=>g(C,V,s,e)))))},{flush:"post"}),u=()=>{y(),r()};return pe(r),u}function Ze(){const i=F(!1),d=Xe();return d&&Pe(()=>{i.value=!0},d),i}function ve(i){const d=Ze();return le(()=>(d.value,!!i()))}function de(i,d={}){const{controls:r=!1,navigator:g=me}=d,x=ve(()=>g&&"permissions"in g),y=F(),u=typeof i=="string"?{name:i}:i,f=F(),c=()=>{var m,e;f.value=(e=(m=y.value)==null?void 0:m.state)!=null?e:"prompt"};_e(y,"change",c,{passive:!0});const b=We(async()=>{if(x.value){if(!y.value)try{y.value=await g.permissions.query(u)}catch{y.value=void 0}finally{c()}if(r)return Te(y.value)}});return b(),r?{state:f,isSupported:x,query:b}:f}function fe(i={}){const{navigator:d=me,read:r=!1,source:g,copiedDuring:x=1500,legacy:y=!1}=i,u=ve(()=>d&&"clipboard"in d),f=de("clipboard-read"),c=de("clipboard-write"),b=le(()=>u.value||y),m=F(""),e=F(!1),C=Ee(()=>e.value=!1,x,{immediate:!1});async function V(){let S=!(u.value&&O(f.value));if(!S)try{m.value=await d.clipboard.readText()}catch{S=!0}S&&(m.value=I())}b.value&&r&&_e(["copy","cut"],V,{passive:!0});async function s(S=j(g)){if(b.value&&S!=null){let _=!(u.value&&O(c.value));if(!_)try{await d.clipboard.writeText(S)}catch{_=!0}_&&L(S),m.value=S,e.value=!0,C.start()}}function L(S){const _=document.createElement("textarea");_.value=S??"",_.style.position="absolute",_.style.opacity="0",document.body.appendChild(_),_.select(),document.execCommand("copy"),_.remove()}function I(){var S,_,R;return(R=(_=(S=document==null?void 0:document.getSelection)==null?void 0:S.call(document))==null?void 0:_.toString())!=null?R:""}function O(S){return S==="granted"||S==="prompt"}return{isSupported:b,text:m,copied:e,copy:s}}const a=globalThis.$adminui,D=a.ref,ye=a.computed,qe=a.reactive;a.inject;a.provide;a.getCurrentInstance;a.watch;a.watchEffect;a.nextTick;a.onBeforeMount;a.onMounted;a.onBeforeUnmount;a.onUnmounted;a.onUpdated;a.onActivated;a.onDeactivated;a.onErrorCaptured;a.readonly;a.toRaw;a.markRaw;a.isRef;a.isProxy;a.unref;a.toRef;a.toRefs;a.isReactive;a.isReadonly;a.shallowRef;a.h;const Ge=a.useApiForm;a.useCheckPermissions;a.useEcho;a.useI18n;const Je=a.useSnackbar;a.useTheme;a.useVuetify;a.useWysiwygImagePicker;const He=a.axios,te=a.currency;a.humanFileSize;a.shortDate;a.shortDateOnly;const oe=a.mediumDate;a.mediumDateOnly;a.toSlug;a.capitaliseFirst;a.sanitiseFilePath;const Ye=a.usePage;a.useForm;const ne=a.router,se=a.useRoute;a.Link;a.Head;var ue;(ue=a.layouts)==null||ue.default;var ce;(ce=a.layouts)==null||ce.product;const be=(i,d)=>{const r=i.__vccOpts||i;for(const[g,x]of d)r[g]=x;return r},Ke={},Qe={role:"img","aria-labelledby":"nav-navigation-3043-XeroLogoTitle-5 nav-navigation-3043-XeroLogoDesc-6",viewBox:"0 0 53 53",fill:"none"};function et(i,d){return w(),T("svg",Qe,d[0]||(d[0]=[Me('<path d="M26.4992 0.0527344C11.8623 0.0527344 0 11.7617 0 26.204C0 40.6452 11.8623 52.3554 26.4992 52.3554C41.1318 52.3554 53 40.6452 53 26.204C53 11.7617 41.1318 0.0527344 26.4992 0.0527344Z" class="Xero__LogoPath-sc-1jj6kwd-2 blue" data-v-55069fcc></path><path d="M19.4255 25.1079C19.9011 23.2503 21.5775 21.9536 23.5036 21.9536C25.4396 21.9536 27.108 23.247 27.5858 25.1079H19.4255ZM29.0672 26.2366C29.3402 25.9015 29.4429 25.4631 29.3557 25.001C29.0006 23.3265 28.0873 21.9852 26.7147 21.1221C25.7719 20.5251 24.6717 20.2097 23.5327 20.2097C22.2761 20.2097 21.0798 20.5863 20.0728 21.299C18.499 22.4136 17.5596 24.2343 17.5596 26.1698C17.5596 26.6556 17.6199 27.1379 17.7387 27.6031C18.3436 29.9599 20.3778 31.7424 22.8007 32.0386C23.035 32.0665 23.2696 32.0807 23.4979 32.0807C23.9833 32.0807 24.4556 32.0191 24.9409 31.8933C25.572 31.7423 26.1732 31.4877 26.7284 31.1371C27.2529 30.7986 27.736 30.3425 28.244 29.7064L28.2773 29.6721C28.4464 29.4618 28.5251 29.1915 28.493 28.9307C28.4641 28.6972 28.352 28.4957 28.1774 28.3634C28.0118 28.2363 27.8144 28.1663 27.622 28.1663C27.4343 28.1663 27.1588 28.234 26.9095 28.5576L26.89 28.5834C26.8077 28.6928 26.7225 28.8058 26.6246 28.9179C26.2888 29.2936 25.9028 29.603 25.4783 29.8374C24.8705 30.1602 24.2137 30.3263 23.5279 30.3312C21.3734 30.3077 20.054 28.8796 19.5384 27.5532C19.4575 27.3144 19.3997 27.0964 19.3625 26.8943C19.3619 26.8738 19.3603 26.8523 19.359 26.8313L27.7006 26.8298C28.28 26.8175 28.7654 26.6068 29.0672 26.2366Z" class="Xero__LogoPath-sc-1jj6kwd-2 white" data-v-55069fcc></path><path d="M41.2233 24.5579C40.3858 24.5579 39.7043 25.2348 39.7043 26.0667C39.7043 26.8988 40.3858 27.5758 41.2233 27.5758C42.0593 27.5758 42.7394 26.8988 42.7394 26.0667C42.7394 25.2348 42.0593 24.5579 41.2233 24.5579Z" class="Xero__LogoPath-sc-1jj6kwd-2 white" data-v-55069fcc></path><path d="M35.6896 21.1567C35.6896 20.6828 35.3007 20.2974 34.8238 20.2974L34.58 20.2938C33.84 20.2938 33.1404 20.5197 32.5509 20.9479C32.4382 20.6012 32.1081 20.3574 31.7358 20.3574C31.256 20.3574 30.878 20.7319 30.875 21.2102L30.8778 31.1105C30.881 31.5821 31.2664 31.9658 31.7373 31.9658C32.211 31.9658 32.5966 31.582 32.5966 31.1101V25.0215C32.5966 23.0488 32.7672 22.2242 34.4836 22.0128C34.626 21.9959 34.7788 21.9949 34.8176 21.9949C35.3228 21.9767 35.6896 21.6242 35.6896 21.1567Z" class="Xero__LogoPath-sc-1jj6kwd-2 white" data-v-55069fcc></path><path d="M13.0526 26.1305L17.5041 21.6836C17.6669 21.5245 17.7567 21.3106 17.7567 21.0815C17.7567 20.6084 17.3684 20.2235 16.8914 20.2235C16.6605 20.2235 16.4426 20.3146 16.2784 20.4796L11.8266 24.9041L7.35704 20.4714C7.19408 20.3116 6.97812 20.2235 6.74871 20.2235C6.27397 20.2235 5.88782 20.6084 5.88782 21.0815C5.88782 21.3111 5.97997 21.529 6.14727 21.6947L10.602 26.1269L6.15399 30.5648C5.98236 30.7279 5.88782 30.9469 5.88782 31.1811C5.88782 31.654 6.27397 32.0389 6.74871 32.0389C6.97463 32.0389 7.19059 31.9513 7.35738 31.7914L11.8222 27.3492L16.2677 31.7706C16.4382 31.945 16.6596 32.0411 16.8914 32.0411C17.3684 32.0411 17.7567 31.6553 17.7567 31.1811C17.7567 30.9547 17.667 30.7401 17.5044 30.5765L13.0526 26.1305Z" class="Xero__LogoPath-sc-1jj6kwd-2 white" data-v-55069fcc></path><path d="M41.222 30.216C38.9223 30.216 37.0516 28.3547 37.0516 26.0667C37.0516 23.7762 38.9223 21.9126 41.222 21.9126C43.5192 21.9126 45.388 23.7762 45.388 26.0667C45.388 28.3547 43.5192 30.216 41.222 30.216ZM41.223 20.1443C37.9429 20.1443 35.2742 22.801 35.2742 26.0664C35.2742 29.331 37.9429 31.987 41.223 31.987C44.5016 31.987 47.1689 29.331 47.1689 26.0664C47.1689 22.801 44.5016 20.1443 41.223 20.1443Z" class="Xero__LogoPath-sc-1jj6kwd-2 white" data-v-55069fcc></path>',6)]))}const tt=be(Ke,[["render",et],["__scopeId","data-v-55069fcc"]]),ot={class:"text-capitalize"},nt={class:"font-weight-bold text-uppercase d-flex flex-column"},lt=Object.assign({name:"OrderSyncFlow"},{__name:"OrderSyncFlow",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:["update:modelValue"],setup(i){const d=se(),r=$e(i,"modelValue"),g=ye(()=>Ye().props.orderStatuses),x=qe({date:[],statuses:g.value.filter(V=>["completed","paid"].includes(V.ref)).map(V=>V.id)}),y=D(1),u=D([]),f=D(!1),c=async()=>{f.value=!0;const V=await He.post(d("admin.setup.integrations.xero.orders.search"),x);u.value=V.data.data,y.value++,f.value=!1},b=()=>{x.statuses=g.value.map(V=>V.id)},m=D([]),e=D(!1),C=async()=>{e.value=!0,ne.post(d("admin.setup.integrations.xero.orders.sync"),{orders:m.value.map(V=>V.id)},{onSuccess(){e.value=!1,m.value=[],x.date=[],emit("input",!1),y.value=1}})};return(V,s)=>{const L=l("v-stepper-item"),I=l("v-divider"),O=l("v-stepper-header"),S=l("VCardTitle"),_=l("AuiInputDateRangePicker"),R=l("AuiSetting"),X=l("VBtn"),J=l("v-checkbox"),H=l("v-col"),Z=l("v-row"),P=l("v-card-text"),M=l("v-card"),$=l("v-stepper-window-item"),q=l("v-data-table"),Y=l("VEmptyState"),K=l("v-avatar"),Q=l("v-list-item-title"),k=l("v-list-item-subtitle"),xe=l("v-list-item-action"),Ce=l("v-list-item"),ge=l("v-list"),ke=l("v-stepper-window"),Se=l("VCardText"),W=l("v-btn"),we=l("VSpacer"),he=l("VCardActions"),Ve=l("VCard"),Ae=l("v-stepper"),Le=l("v-dialog");return w(),U(Le,{modelValue:r.value,"onUpdate:modelValue":s[8]||(s[8]=E=>r.value=E),width:"900",scrollable:""},{default:t(()=>[o(Ae,{modelValue:n(y),"onUpdate:modelValue":s[7]||(s[7]=E=>z(y)?y.value=E:null),flat:""},{default:t(({prev:E,next:Ue})=>[o(Ve,null,{default:t(()=>[o(S,null,{default:t(()=>[s[12]||(s[12]=p("h2",null,"Sync Orders to Xero",-1)),o(O,null,{default:t(()=>[o(L,{value:1},{default:t(()=>s[9]||(s[9]=[v(" Filter Orders ")])),_:1}),o(I),o(L,{value:2},{default:t(()=>s[10]||(s[10]=[v(" Select Orders ")])),_:1}),o(I),o(L,{value:3},{default:t(()=>s[11]||(s[11]=[v(" Confirm ")])),_:1})]),_:1})]),_:1}),o(Se,{style:{"max-height":"65vh",overflow:"auto"}},{default:t(()=>[o(ke,null,{default:t(()=>[o($,{value:1},{default:t(()=>[o(M,{flat:""},{default:t(()=>[o(P,{class:"px-0"},{default:t(()=>[o(R,{title:"Date Range",help:`Select a range of order dates that will be processed. No range searches all
												orders.`},{default:t(()=>[o(_,{modelValue:n(x).date,"onUpdate:modelValue":s[0]||(s[0]=h=>n(x).date=h),label:"Date Range",onInput:s[1]||(s[1]=h=>m.value=[])},null,8,["modelValue"])]),_:1}),o(R,{title:"Included Statuses"},{help:t(()=>[s[14]||(s[14]=p("p",{class:"mb-4"},"Choose the order statuses that will be included",-1)),o(X,{block:"",color:"success",variant:"tonal",onClick:b},{default:t(()=>s[13]||(s[13]=[v("Select All")])),_:1})]),default:t(()=>[o(Z,{"no-gutters":""},{default:t(()=>[(w(!0),T(B,null,re(n(g),h=>(w(),U(H,{key:h.id,cols:"12",sm:"6",md:"6"},{default:t(()=>[o(J,{modelValue:n(x).statuses,"onUpdate:modelValue":[s[2]||(s[2]=N=>n(x).statuses=N),s[3]||(s[3]=N=>m.value=[])],value:h.id,color:h.colour,"hide-details":"",class:"my-0"},{label:t(()=>[p("span",ot,A(h.name),1)]),_:2},1032,["modelValue","value","color"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o($,{value:2},{default:t(()=>[o(M,{flat:""},{default:t(()=>[n(u).length>0?(w(),U(q,{key:0,modelValue:n(m),"onUpdate:modelValue":s[4]||(s[4]=h=>z(m)?m.value=h:null),items:n(u),headers:[{text:"ID",value:"id"},{text:"Account",value:"account.name"},{text:"User",value:"user.full_name"},{text:"Date",value:"created_at"}],"return-object":"","show-select":""},{"item.created_at":t(({item:h})=>[v(A(n(oe)(h.created_at)),1)]),_:1},8,["modelValue","items"])):(w(),U(Y,{key:1,icon:"mdi-database-off",title:"No Available Orders",text:"No orders matched your selected filters. Go back and select again."}))]),_:1})]),_:1}),o($,{value:3},{default:t(()=>[o(M,{flat:""},{default:t(()=>[o(P,null,{default:t(()=>[v(" You are about to sync "+A(n(m).length)+" orders to Xero. ",1),o(ge,{density:"compact"},{default:t(()=>[(w(!0),T(B,null,re(n(m),h=>(w(),U(Ce,{key:h.id},{prepend:t(()=>[o(K,{color:"#336633",size:"50"},{default:t(()=>{var N;return[p("div",nt,[p("div",null,A((N=h.lines)==null?void 0:N.length),1),s[15]||(s[15]=p("div",{class:"text-caption"},"items",-1))])]}),_:2},1024)]),default:t(()=>[h.account?(w(),U(Q,{key:0},{default:t(()=>[v(A(h.account.name),1)]),_:2},1024)):G("",!0),o(k,null,{default:t(()=>[v(A(n(oe)(h.created_at)),1)]),_:2},1024),o(xe,null,{default:t(()=>[s[16]||(s[16]=p("small",null,"Total:",-1)),v(" "+A(n(te)(h.cart_inc_tax)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(he,{style:{"background-color":"#efefef","border-top":"1px solid #ccc"}},{default:t(()=>[n(y)>1?(w(),U(W,{key:0,color:"error",variant:"text",onClick:E},{default:t(()=>s[17]||(s[17]=[v(" Back ")])),_:2},1032,["onClick"])):(w(),U(W,{key:1,color:"error",variant:"text",onClick:s[5]||(s[5]=h=>r.value=!1)},{default:t(()=>s[18]||(s[18]=[v(" Close ")])),_:1})),o(we),n(y)===1?(w(),U(W,{key:2,color:"primary",loading:n(f),onClick:s[6]||(s[6]=h=>c())},{default:t(()=>s[19]||(s[19]=[v("Next")])),_:1},8,["loading"])):n(y)===2?(w(),U(W,{key:3,color:"primary",onClick:Ue},{default:t(()=>s[20]||(s[20]=[v("Next")])),_:2},1032,["onClick"])):(w(),U(W,{key:4,color:"primary",disabled:n(m).length===0,loading:n(e),onClick:C},{default:t(()=>s[21]||(s[21]=[v(" Sync Selected Orders ")])),_:1},8,["disabled","loading"]))]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}}),at={class:"d-flex flex-column"},st={class:"text-caption"},rt={class:"whitespace-nowrap"},it={class:"whitespace-nowrap"},dt={class:"whitespace-nowrap"},ut={__name:"FailedOrderSyncs",props:{value:{type:Boolean,default:!1},items:{type:Array,required:!0}},emits:["input"],setup(i,{emit:d}){const r=se(),g=d,x=i,y=Je(),{copy:u}=fe(),f=ye(()=>x.items.map(e=>{var C;return e.order||(e.order={lines:[]}),{...e,failed_at:oe(e.failed_at),order_id:((C=e==null?void 0:e.order)==null?void 0:C.id)??null}})??[]),c=D([]),b=()=>{ne.post(r("admin.setup.integrations.xero.orders.retry"),{selected:c.value.map(e=>e.id)},{onSuccess(){g("input",!1)}})},m=()=>{ne.post(r("admin.setup.integrations.xero.orders.delete"),{selected:c.value.map(e=>e.id)},{onSuccess(){g("input",!1)}})};return(e,C)=>{const V=l("v-chip"),s=l("v-data-table"),L=l("v-btn"),I=l("v-spacer"),O=l("AuiCard"),S=l("v-dialog");return w(),U(S,{"model-value":x.value,width:"1400","onUpdate:modelValue":C[1]||(C[1]=_=>g("update:modelValue",_)),scrollable:""},{default:t(()=>[o(O,{title:"Failed Order Syncs"},{actions:t(()=>[o(L,{color:"error",variant:"text",disabled:n(c).length===0,onClick:m},{default:t(()=>C[4]||(C[4]=[v("Delete Selected")])),_:1},8,["disabled"]),o(I),o(L,{color:"primary",disabled:n(c).length===0,onClick:b},{default:t(()=>C[5]||(C[5]=[v("Retry Selected")])),_:1},8,["disabled"])]),default:t(()=>[o(s,{modelValue:n(c),"onUpdate:modelValue":C[0]||(C[0]=_=>z(c)?c.value=_:null),"show-select":"",items:n(f),headers:[{text:"Order ID",value:"order_id"},{text:"Account",value:"order.account.name"},{text:"User",value:"order.user.full_name"},{text:"Order Details",value:"order"},{text:"Failure Reason",value:"exception"},{text:"Failed at",value:"failed_at"}]},{"item.order_id":t(({value:_})=>[o(V,{color:"info",class:"text-white",label:"",onClick:R=>{n(u)(_),n(y).add({text:"Order ID copied to clipboard",type:"success"})}},{default:t(()=>[v(A(_),1)]),_:2},1032,["onClick"])]),"item.order":t(({item:_})=>[p("div",at,[p("div",st,A(_.order.lines.length)+" items",1),p("div",rt,[C[2]||(C[2]=p("span",{class:"font-weight-bold"},"Subtotal:",-1)),v(" "+A(n(te)(_.order.cart_exc_tax)),1)]),p("div",it,[C[3]||(C[3]=p("span",{class:"font-weight-bold"},"Total:",-1)),v(" "+A(n(te)(_.order.cart_inc_tax)),1)])])]),"item.exception":t(({value:_})=>[p("div",null,A(_),1)]),"item.failed_at":t(({value:_})=>[p("span",dt,A(_),1)]),_:1},8,["modelValue","items"])]),_:1})]),_:1},8,["model-value"])}}},ct={class:"xero-logo d-flex px-4"},pt={class:"px-4 max-w-prose pt-8"},mt={key:0},_t={class:"px-4"},vt={class:"px-4"},ft={class:"px-4"},yt={class:"text-center text-h6"},bt={class:"text-center"},xt={class:"text-center text-h6 mb-2"},Ct={__name:"XeroSetup",props:{xeroCallback:{type:String,default:""},xeroWebhookDeliveryURL:{type:String,default:""},xeroSettings:{type:Array,default:()=>[]},paymentMethods:{type:Array,default:()=>[]},xeroStatus:{type:Object,default:()=>({})},failedOrderSyncs:{type:Array,default:()=>[]}},setup(i){const d=se(),r=i,{copy:g,isSupported:x}=fe({source:()=>r.xeroCallback}),y=()=>r.xeroSettings.reduce((m,e)=>{const C=e.value_cast==="integer"?+e.value:e.value;return m[e.name]=C,m},{});let{form:u,formErrors:f}=Ge({route:"admin.api.config.preferences",initialData:y()});const c=D(!1),b=D(!1);return(m,e)=>{const C=l("v-alert"),V=l("v-slide-y-transition"),s=l("v-switch"),L=l("AuiSetting"),I=l("AuiInputSelect"),O=l("v-divider"),S=l("AuiInputText"),_=l("AuiInputPassword"),R=l("AuiInputAutocomplete"),X=l("v-btn"),J=l("v-table"),H=l("v-card"),Z=l("v-col"),P=l("v-icon"),M=l("AuiCard"),$=l("v-list-item-title"),q=l("v-list-item"),Y=l("v-badge"),K=l("v-list"),Q=l("v-row");return w(),U(Q,null,{default:t(()=>[o(Z,{cols:"9"},{default:t(()=>[o(H,{class:"py-4"},{default:t(()=>[p("div",ct,[o(tt)]),p("div",pt,[o(V,null,{default:t(()=>[!n(u).xero_linked_account&&r.xeroStatus.connected?(w(),T("div",mt,[o(C,{type:"warning",border:"start"},{default:t(()=>e[14]||(e[14]=[v(" Please select an account to link for your integration ")])),_:1})])):G("",!0)]),_:1})]),o(L,{title:"Sync Orders",help:"When enabled, orders placed through AdminUI will be automatically pushed to the linked Xero account"},{default:t(()=>[o(s,{modelValue:n(u).xero_sync_orders,"onUpdate:modelValue":e[0]||(e[0]=k=>n(u).xero_sync_orders=k),label:"Sync Orders",disabled:!r.xeroStatus.connected||!n(u).xero_linked_account},null,8,["modelValue","disabled"])]),_:1}),o(L,{title:"Sync Contact Updates",help:"While contacts will initially be pushed when syncing orders, you can also choose to push changes to your accounts to Xero to update linked contacts"},{default:t(()=>[o(s,{modelValue:n(u).xero_sync_contacts,"onUpdate:modelValue":e[1]||(e[1]=k=>n(u).xero_sync_contacts=k),label:"Sync Contacts",disabled:!r.xeroStatus.connected||!n(u).xero_linked_account},null,8,["modelValue","disabled"])]),_:1}),o(L,{title:"Sync Payments",help:"When enabled, orders placed through AdminUI will be automatically pushed to the linked Xero account"},{default:t(()=>[o(s,{modelValue:n(u).xero_sync_payments,"onUpdate:modelValue":e[2]||(e[2]=k=>n(u).xero_sync_payments=k),label:"Sync Payments",disabled:!r.xeroStatus.connected||!n(u).xero_linked_account},null,8,["modelValue","disabled"])]),_:1}),o(L,{title:"Sync Payment Methods",help:"Select which payments should be sent to Xero"},{default:t(()=>[o(I,{modelValue:n(u).xero_sync_payment_methods,"onUpdate:modelValue":e[3]||(e[3]=k=>n(u).xero_sync_payment_methods=k),label:"Included Methods",items:i.paymentMethods,"item-title":"description",multiple:"",chips:"",dense:!1,"deletable-chips":"",disabled:!n(u).xero_sync_payments},null,8,["modelValue","items","disabled"])]),_:1}),p("div",_t,[o(O,{class:"my-4"})]),o(L,{title:"App Credentials"},{help:t(()=>e[15]||(e[15]=[v(" To enable AdminUI to connect with your Xero account, you must create an app and then enter its credentials here. "),p("a",{href:"https://developer.xero.com/app/manage",target:"_blank"},"Create Xero Application",-1)])),default:t(()=>[o(S,{modelValue:n(u).xero_client_id,"onUpdate:modelValue":e[4]||(e[4]=k=>n(u).xero_client_id=k),label:"Client ID"},null,8,["modelValue"]),o(_,{modelValue:n(u).xero_client_secret,"onUpdate:modelValue":e[5]||(e[5]=k=>n(u).xero_client_secret=k),label:"Client Secret"},null,8,["modelValue"])]),_:1}),o(L,{title:"Linked Xero Account",help:"Select the account on your connected Xero account with which you want to sync."},{default:t(()=>[o(R,{modelValue:n(u).xero_linked_account,"onUpdate:modelValue":e[6]||(e[6]=k=>n(u).xero_linked_account=k),label:"Account",items:r.xeroStatus.accounts,"item-title":"Name","item-value":"AccountID",clearable:""},null,8,["modelValue","items"])]),_:1}),o(L,{title:"Webhooks",help:"To enable AdminUI to respond to events from your Xero account, you must provide a webhook key"},{default:t(()=>[o(_,{modelValue:n(u).xero_webhook_key,"onUpdate:modelValue":e[7]||(e[7]=k=>n(u).xero_webhook_key=k),label:"Webhook Key"},null,8,["modelValue"])]),_:1}),p("div",vt,[o(O,{class:"my-4"})]),o(L,{title:"Your Xero App URLs",help:"Xero requires you to register a few URLs with them for full integration. The first is the URL to use when a connection attempt is complete. The second is the URL to send Webhook deliveries."},{default:t(()=>[o(J,{"show-hover":""},{default:t(()=>[p("tbody",null,[p("tr",null,[e[16]||(e[16]=p("td",null,"Redirect URL:",-1)),p("td",null,[p("strong",null,A(r.xeroCallback),1),n(x)?(w(),U(X,{key:0,icon:"mdi-content-copy",size:"small",class:"ml-2",onClick:e[8]||(e[8]=k=>n(g)())})):G("",!0)])]),p("tr",null,[e[17]||(e[17]=p("td",null,"Webhook Delivery URL:",-1)),p("td",null,[p("strong",null,A(r.xeroWebhookDeliveryURL),1),n(x)?(w(),U(X,{key:0,icon:"mdi-content-copy",size:"small",class:"ml-2",onClick:e[9]||(e[9]=k=>n(g)(r.xeroWebhookDeliveryURL))})):G("",!0)])])])]),_:1})]),_:1}),p("div",ft,[o(O,{class:"my-4"})])]),_:1})]),_:1}),o(Z,{cols:"3"},{default:t(()=>[o(M,{title:"Connection Status",class:"mb-8"},{default:t(()=>[r.xeroStatus.error?(w(),T(B,{key:0},[o(C,{type:"error"},{default:t(()=>[v(A(r.xeroStatus.error),1)]),_:1}),o(X,{color:"primary",block:"",href:n(d)("xero.auth.authorize")},{default:t(()=>e[18]||(e[18]=[v("Reconnect to Xero")])),_:1},8,["href"])],64)):r.xeroStatus.connected?(w(),T(B,{key:1},[p("p",yt,[o(P,{class:"mr-4",color:"success"},{default:t(()=>e[19]||(e[19]=[v("mdi-flash")])),_:1}),e[20]||(e[20]=v("Connected"))]),p("p",bt,[e[21]||(e[21]=v(" Connected as ")),p("strong",null,A(r.xeroStatus.organisationName),1),v(" via "+A(r.xeroStatus.username),1)]),o(X,{variant:"text",color:"primary",block:"",href:n(d)("xero.auth.authorize")},{default:t(()=>e[22]||(e[22]=[v("Reconnect to Xero")])),_:1},8,["href"])],64)):(w(),T(B,{key:2},[p("p",xt,[o(P,{class:"mr-4"},{default:t(()=>e[23]||(e[23]=[v("mdi-flash-off")])),_:1}),e[24]||(e[24]=v(" Not Connected "))]),o(X,{color:"primary",block:"",href:n(d)("xero.auth.authorize")},{default:t(()=>e[25]||(e[25]=[v("Connect to Xero")])),_:1},8,["href"])],64))]),_:1}),o(M,{title:"Actions",class:"my-8","content-class":"px-0"},{default:t(()=>[o(K,null,{default:t(()=>[o(q,{onClick:e[10]||(e[10]=ie(k=>c.value=!0,["stop"]))},{prepend:t(()=>[o(P,null,{default:t(()=>e[26]||(e[26]=[v("mdi-book-sync")])),_:1})]),default:t(()=>[o($,null,{default:t(()=>e[27]||(e[27]=[v("Manually Sync Orders")])),_:1})]),_:1}),o(q,{disabled:!r.xeroStatus.connected||r.failedOrderSyncs.length===0,onClick:e[11]||(e[11]=ie(k=>b.value=!0,["stop"]))},{prepend:t(()=>[o(P,{color:"error"},{default:t(()=>e[28]||(e[28]=[v("mdi-sync-alert")])),_:1})]),append:t(()=>[o(Y,{content:r.failedOrderSyncs.length,location:"right",inline:"",class:"mt-0",color:"error","model-value":r.failedOrderSyncs.length>0},null,8,["content","model-value"])]),default:t(()=>[o($,null,{default:t(()=>e[29]||(e[29]=[p("span",null,"View Failed Order Syncs",-1)])),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),o(lt,{modelValue:n(c),"onUpdate:modelValue":e[12]||(e[12]=k=>z(c)?c.value=k:null)},null,8,["modelValue"]),o(ut,{modelValue:n(b),"onUpdate:modelValue":e[13]||(e[13]=k=>z(b)?b.value=k:null),items:r.failedOrderSyncs},null,8,["modelValue","items"])]),_:1})}}},kt=be(Ct,[["__scopeId","data-v-c05a0a4e"]]);export{kt as default};
